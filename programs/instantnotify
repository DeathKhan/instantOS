#!/bin/bash
# show notification history in rofi
# x to mark as readentry headerentry headerentry headerentry headerentry headerentry header
# esc to exit

if ! [ -e /tmp/notifications/notif.txt ]; then
    echo "creating notification dir"
    mkdir /tmp/notifications
    cd /tmp/notifications
    echo "alt+X to clear out a notification" >notif.txt
fi

NREAD=$(tac notif.txt | rofi -dmenu -i -p notifications -kb-accept-entry 'Alt+x' -markup-rows)

while [ -n "$NREAD" ]; do
    grep -vF "$NREAD" notif.txt >tmp.notif && mv tmp.notif notif.txt
    NREAD=$(tac notif.txt | rofi -dmenu -i -p notifications -kb-accept-entry 'Alt+x' -markup-rows)
done
